---
import Navbar from "src/components/astro/Navbar.astro";
import Footer from "src/components/astro/Footer.astro";
import ArrowIcon from "../components/astro/icons/ArrowIcon.astro";
import EmailIcon from "../components/astro/icons/EmailIcon.astro";
import WhatsappIcon from "src/components/astro/icons/WhatsappIcon.astro";
import Layout from "../layouts/Layout.astro";
import { Image } from "astro:assets";
import homeData from "src/data/home.json.ts";
import ExpertiseCard from "../components/astro/home/ExpertiseCard.astro";
import LocationIcon from "../components/astro/icons/LocationIcon.astro";
import SideContacts from "../components/astro/VerticalContacts.astro";
import HorizontalContacts from "../components/astro/HorizontalContacts.astro";
import stringPreprocessor from "../utils/string-preprocessor";
import { StarsBackground } from "../components/react/aceternity/stars-background";
import { ShootingStars } from "../components/react/aceternity/shooting-stars";

const processedExpertise = homeData.expertise.map((e) => {
  const description = stringPreprocessor(e.description);
  return {
    title: e.title,
    description: description,
  };
});
---

<Layout title="Home Page">
  <ShootingStars client:load />
  <StarsBackground client:load />
  <main class="relative flex h-full min-h-[100vh] w-full min-w-[100vw] flex-col items-center">
    <Navbar />
    <SideContacts />
    <div class="flex w-3/4 flex-col">
      <section class="flex h-[100vh] min-h-[100vh] items-center justify-between gap-5">
        <div class="flex w-3/5 flex-col items-start gap-2">
          <h2 class="text-4xl font-bold text-white">{homeData.greetings}</h2>
          <h1 class="name-gradient text-6xl font-semibold drop-shadow-primary">{homeData.name}</h1>
          <div class="flex flex-col gap-4 py-8">
            {
              homeData.description.map((d) => {
                return <p class="font-inter text-base text-white">{d}</p>;
              })
            }
          </div>
          <a
            href="/CV_Robert_Wiliam.pdf"
            target="_blank"
            class="text-primary font-semibold rounded-full transition-colors bg-transparent my-8 py-4 px-8 border overflow-hidden hover:text-white border-primary relative button-animation">
            <span class="relative z-10">Download CV</span>
          </a>
        </div>
        <div class="flex w-1/4 flex-col">
          <Image
            class="aspect-square rounded-full object-cover"
            width="550"
            height="550"
            src="https://developers.elementor.com/docs/assets/img/elementor-placeholder-image.png"
            alt="Temporary Image"
          />
        </div>
      </section>
      <section class="flex h-[80vh] min-h-[80vh] flex-col items-center justify-center">
        <h3 class="text-4xl font-semibold text-white">My Expertise and Interest</h3>
        <div class="flex gap-8 pb-8 pt-16">
          {
            processedExpertise.map((expertise) => {
              return (
                <ExpertiseCard title={expertise.title}>
                  <div
                    class="text-base text-white"
                    set:html={expertise.description}
                  />
                </ExpertiseCard>
              );
            })
          }
        </div>
        <div class="flex w-full justify-end">
          <div class="arrow-animation group flex cursor-pointer items-center justify-center gap-2 font-light">
            <a
              href="./works"
              class="text-xl text-white">
              Learn more about my works
            </a>
            <div class="group-hover:animate-wiggle">
              <ArrowIcon />
            </div>
          </div>
        </div>
      </section>
      <section class="flex flex-col items-center gap-12 py-16 py-32">
        <h3 class="text-4xl font-semibold text-white">Let's Get In Touch</h3>
        <div class="flex items-center justify-center gap-32 px-32">
          <div class="w-1/2 text-justify text-xl text-white">
            {homeData.contacts.description}
          </div>
          <div class="flex w-1/2 flex-col gap-8">
            <div
              class="contact-animation relative flex w-fit cursor-pointer gap-4 fill-white text-white transition-colors hover:fill-primary hover:text-primary">
              <EmailIcon />
              <span class="text-lg"> robert.wiliam12345@gmail.com </span>
            </div>
            <div
              class="contact-animation relative flex w-fit cursor-pointer gap-4 fill-white text-white transition-colors hover:fill-primary hover:text-primary">
              <WhatsappIcon />
              <span class="text-lg"> +62 878-8898-8754 </span>
            </div>
            <div
              class="contact-animation relative flex w-fit cursor-pointer gap-4 fill-white text-white transition-colors hover:fill-primary hover:text-primary">
              <LocationIcon />
              <span class="text-lg"> Jakarta, Indonesia </span>
            </div>
          </div>
        </div>
        <HorizontalContacts />
      </section>
      <Footer />
    </div>
  </main>
</Layout>

<style>
  .name-gradient {
    background: linear-gradient(to bottom, #37b7c3, #088395);
    background-clip: text;
    -webkit-background-clip: text;
    color: transparent;
  }

  .button-animation::after {
    content: "";
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: #00adb4;
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.4s ease;
    z-index: 0;
  }

  .button-animation:hover::after {
    transform: scaleX(1);
  }

  .contact-animation::after {
    content: "";
    position: absolute;
    left: 0;
    bottom: -20%;
    width: 100%;
    height: 1px;
    background-color: #00adb4;
    transform: scaleX(0);
    transform-origin: left;
    transition: transform 0.4s ease;
    z-index: 0;
  }

  .contact-animation:hover::after {
    transform: scaleX(1);
  }
</style>
